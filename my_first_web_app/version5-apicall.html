<!DOCTYPE html>
<html lang="en"> 

    <head>
        <title>Hello World!</title>

        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="my third page - CW mobile views">
        <meta name="Author" content="Phil Lancelotte">

        <link rel="stylesheet" href="_css/mobile_styles.css">

    </head>
    <body>
        <div class="main-container">
            <header><h1 title='title'>API Calls - Jokes, because XKCD doesn't allow CORS.</h1></header>
        </div>
        <div class="main-container">
            <header id="welcomeHeader"></header>
        </div>
        <div class="main-container">
            <div class="container-wide">
                <div class="button-container">
                    <a href="index.html" class="button hover-effect-btn" aria-describedby="desc1">Back to Version 1</a>
                    <span id="desc1" class="visually-hidden">Go back to the previous version of the website</span>
                    <a href="version2-accessible.html" class="button hover-effect-btn" aria-describedby="desc2">Back to Version 2</a>
                    <span id="desc2" class="visually-hidden">Navigate to the accessible version of the site</span>
                    <a href="version3-mobile.html" class="button hover-effect-btn" aria-describedby="desc3">Back to Version 3</a>
                    <span id="desc2" class="visually-hidden">Navigate to the accessible version of the site for mobiles</span>
                    <a href="version4-formstuff.html" class="button hover-effect-btn" aria-describedby="desc3">Back to Version 4</a>
                    <span id="desc2" class="visually-hidden">Navigate to the java heavy version of the site with forms</span>

                </div>

                <p title='ooh, a paragraph'>This is a programming joke, I don't understand most of them yet!!</p>
                <div class="joke-container">
                    <label id="jokeSetup">Sudo make me a sandwich! (XKCD Reference)</label>
                    <br>
                    <button onclick="getapi()">Get a new one!!</button>

                </div>

            </div>
        </div>

<script>
    const apiUrl = "https://official-joke-api.appspot.com/jokes/programming/random";

    async function getapi() {
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            console.log(data);
            const joke = data[0];
            document.getElementById("jokeSetup").innerHTML = `<strong>${joke.setup}</strong><br>${joke.punchline}`;
        } catch (error) {
            console.error("Error fetching data:", error);
        }
    }             
</script>
    </body>
</html>